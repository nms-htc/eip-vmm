<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:eip="http://xmlns.jcp.org/jsf/composite/eip"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <ui:composition template="common/template.xhtml">
      
        <ui:define name="content">
            
            <h:form>
                <h:messages styleClass="messages"
                            id="messages"
                            errorClass="error-messages"
                            fatalClass="fatal-messages"
                            infoClass="info-messages"/>
                
                <div id="search-form">
                    <h3><h:outputText value="#{msg.appSearchTitle}"/></h3>
                    <h:inputText id="keywords" 
                                 styleClass="searchField" 
                                 value="#{productSearchController.keywords}"
                                 required="true"
                                 requiredMessage="#{msg.appSearchFieldRequiredMessage}"/>
                    <h:commandButton value="#{msg.Search}" actionListener="#{productSearchController.search}">
                        <f:ajax execute="keywords" render="searchResult messages"/>
                    </h:commandButton>
                    
                    <h:panelGroup id="searchResult">
                    
                        <h:panelGroup rendered="#{productSearchController.items != null and productSearchController.items.rowCount == 0}">
                            <ul class="messages">
                                <li class="info-messages">
                                    <h:outputText value="#{msg.appEmptyDataTableTitle}" />
                                </li>
                            </ul>
                        </h:panelGroup>

                        <eip:list-product rendered="#{productSearchController.items != null and productSearchController.items.rowCount > 0}"
                                          list="#{productSearchController.items}"
                                          listTitle="#{msg.appSearchResultTitle}"
                                          productType="#{productSearchController.productViewingStr}"/>
                        
                        <h:panelGroup rendered="#{productSearchController.items != null and productSearchController.items.rowCount > 0}">
                            <span class="list-product-pagging">
                                <h:commandLink value="#{msg['product.list.preview.title']}" 
                                               actionListener="#{productSearchController.preview}"
                                               disabled="#{not productSearchController.paginationHelper.hasPreviewPage}"/>

                                <h:commandLink value="#{msg['product.list.next.title']}" 
                                               actionListener="#{productSearchController.next}"
                                               disabled="#{not productSearchController.paginationHelper.hasNextPage}"/>
                            </span>
                        </h:panelGroup>
                    </h:panelGroup>
                </div>
            </h:form>
        </ui:define>
    </ui:composition>
</html>